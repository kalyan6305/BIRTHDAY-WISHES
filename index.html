<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Happy Birthday 🎉</title>
<!-- html2canvas -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
  overflow: hidden;
  font-family:'Poppins',sans-serif;
  background: linear-gradient(135deg,#ffb6c1,#ff69b4);
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  position:relative;
}

/* Welcome Page */
#welcome-page { text-align:center; z-index:10; }
#welcome-page h1 { font-size:3rem; animation: fadeIn 2s ease; }
#start-btn { margin-top:20px; padding:12px 30px; background:#fff; color:#ff1493; font-size:1.2rem; border:none; border-radius:25px; cursor:pointer; transition:0.3s; }
#start-btn:hover { background:#ffe6f2; }

/* Birthday Page */
#birthday-page {
  display:none;
  width:100%; height:100%;
  position:absolute; top:0; left:0;
  overflow:hidden; text-align:center;
}

.photo-container {
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%) scale(0.9);
  opacity:0;
  transition: all 1.2s ease;
}
.photo-container.show { opacity:1; transform:translate(-50%,-50%) scale(1); }
.photo-container img { width:320px; height:320px; border-radius:20px; box-shadow:0 0 25px rgba(255,255,255,0.8); object-fit:cover; }
.wish-text { font-size:1.5rem; margin-top:20px; text-shadow:0 0 10px #ff66b2; }

/* Floating Hearts */
.heart { position:absolute; color:#ff66b2; font-size:24px; animation: floatHearts 6s linear infinite; opacity:0.8; }
@keyframes floatHearts { 0% { transform:translateY(100vh) scale(0.8); opacity:0.8; } 100% { transform:translateY(-10vh) scale(1.3); opacity:0; } }

/* Confetti */
.confetti { position:absolute; width:10px; height:10px; opacity:0.8; animation:fall 4s linear infinite; }
@keyframes fall { 0%{transform:translateY(-10px) rotate(0deg);} 100%{transform:translateY(110vh) rotate(720deg);} }

/* Final Section */
#final-section { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; opacity:0; transition:opacity 1.5s; }
#final-section.show { opacity:1; }
#final-message { font-size:3rem; text-shadow:0 0 15px #fff; }
#replay-btn,#download-btn { margin-top:20px; padding:12px 30px; background:#fff; color:#ff1493; font-size:1.2rem; border:none; border-radius:25px; cursor:pointer; transition:0.3s; }
#replay-btn:hover,#download-btn:hover { background:#ffe6f2; }

/* Download Card */
#download-card {
  width:400px; height:500px; margin-top:40px; border-radius:20px; overflow:hidden; display:none;
  flex-direction:column; align-items:center; justify-content:flex-end; background-size:cover; background-position:center;
  position:relative; box-shadow:0 0 20px rgba(255,255,255,0.7); color:#fff; text-shadow:0 0 10px #000;
}
#download-card::before { content:""; position:absolute; inset:0; background:rgba(0,0,0,0.4); }
#download-card h2,#download-card h3 { position:relative; z-index:2; margin:10px 0; }
#download-card h2 { font-size:2rem; margin-top:auto; }
#download-card h3 { font-size:1.2rem; margin-bottom:30px; }

@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
</style>
</head>

<body>
<div id="welcome-page">
  <h1>🎂 Welcome to the Birthday Surprise 🎈</h1>
  <button id="start-btn">Let's Begin 💖</button>
</div>

<div id="birthday-page"></div>

<div id="final-section">
  <div id="final-message">🎉 Happy Birthday! 💝</div>
  <button id="replay-btn">Replay 🎬</button>
  <button id="download-btn">Download Card</button>
</div>

<div id="download-card">
  <h2>🎂 Happy Birthday 🎉</h2>
  <h3>— P. Kalyannagu 💖</h3>
</div>

<audio id="bg-music" loop>
  <source src="ప్రసన్నకి పుట్టినరోజు శుభాకాంక్షలు.mp3" type="audio/mpeg" />
</audio>

<script>
document.addEventListener("DOMContentLoaded",()=>{
const startBtn=document.getElementById('start-btn');
const welcomePage=document.getElementById('welcome-page');
const birthdayPage=document.getElementById('birthday-page');
const finalSection=document.getElementById('final-section');
const downloadCard=document.getElementById('download-card');
const replayBtn=document.getElementById('replay-btn');
const downloadBtn=document.getElementById('download-btn');
const bgMusic=document.getElementById('bg-music');

const photos=[
"images/img1.jpg","images/img2.jpg","images/img3.jpg","images/img4.jpg",
"images/img5.jpg","images/img6.jpg","images/img7.jpg","images/img8.jpg",
"images/img9.jpg","images/img10.jpg"
];

const wishes=[
"Wishing you endless happiness 💕",
"You make life brighter every day 🌟",
"Cheers to your amazing journey 🥂",
"Keep smiling and dreaming big 🌈",
"You're truly one of a kind 💖",
"Your friendship is priceless 🎁",
"May all your dreams come true 🌠",
"You deserve all the happiness 🌹",
"Let’s celebrate your day 🎊",
"Happy Birthday! Stay awesome 💫"
];

// Store images in LocalStorage
function storeImagesInLocalStorage(){
photos.forEach((src,idx)=>{
const img=new Image();
img.crossOrigin='Anonymous';
img.src=src;
img.onload=function(){
const canvas=document.createElement('canvas');
canvas.width=img.width; canvas.height=img.height;
const ctx=canvas.getContext('2d'); ctx.drawImage(img,0,0);
const dataURL=canvas.toDataURL('image/png');
localStorage.setItem(`birthday_img_${idx}`,dataURL);
}
})
}

// Download PDF
downloadBtn.addEventListener('click', async () => {
downloadCard.innerHTML=`<h2>🎂 Happy Birthday 🎉</h2><h3>— P. Kalyannagu 💖</h3>`;
const randomPhoto = localStorage.getItem('birthday_img_0') || photos[0];
downloadCard.style.backgroundImage = `url('${randomPhoto}')`;
downloadCard.style.display = 'flex';
setTimeout(()=>{
html2canvas(downloadCard).then(canvas=>{
const { jsPDF } = window.jspdf;
const pdf = new jsPDF('p', 'pt', [canvas.width, canvas.height]);
const imgData = canvas.toDataURL('image/png');
pdf.addImage(imgData,'PNG',0,0,canvas.width,canvas.height);
pdf.save('BirthdayCard_P_Kalyannagu.pdf');
downloadCard.style.display='none';
});
},300);
});

// Start Button
startBtn.addEventListener('click',()=>{
welcomePage.style.display='none';
birthdayPage.style.display='block';
bgMusic.play().catch(()=>{});
createHearts(); createConfetti();
showPhotos(0);
});

// Replay
replayBtn.addEventListener('click',()=>{ window.location.reload(); });

// Hearts
function createHearts(){
setInterval(()=>{
const heart=document.createElement('div');
heart.classList.add('heart'); heart.innerHTML='💖';
heart.style.left=Math.random()*100+'vw';
heart.style.animationDuration=5+Math.random()*5+'s';
document.body.appendChild(heart);
setTimeout(()=>heart.remove(),8000);
},300);
}

// Confetti
function createConfetti(){
const colors=['#ff0000','#00ffcc','#ffcc00','#ff33cc','#00ccff'];
setInterval(()=>{
const conf=document.createElement('div');
conf.classList.add('confetti');
conf.style.left=Math.random()*100+'vw';
conf.style.background=colors[Math.floor(Math.random()*colors.length)];
conf.style.width=Math.random()*10+6+'px';
conf.style.height=Math.random()*10+6+'px';
conf.style.animationDuration=3+Math.random()*3+'s';
conf.style.transform=`rotate(${Math.random()*360}deg)`;
birthdayPage.appendChild(conf);
setTimeout(()=>conf.remove(),4000);
},200);
}

// Photos + Wishes
function showPhotos(index){
if(index>=photos.length){ setTimeout(()=>{ finalSection.classList.add('show'); },800); return; }
const div=document.createElement('div');
div.classList.add('photo-container');
div.innerHTML=`<img src="${photos[index]}" alt="photo"><div class='wish-text'>${wishes[index]}</div>`;
birthdayPage.appendChild(div);
setTimeout(()=>div.classList.add('show'),300);
setTimeout(()=>div.classList.remove('show'),4000);
setTimeout(()=>{ div.remove(); showPhotos(index+1); },5000);
}

storeImagesInLocalStorage();
});
</script>
</body>
</html>
